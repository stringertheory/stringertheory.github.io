function getIndex(t,e){var a=moment(e).year(t.year()),i=moment(e).year(t.year()+1);return t<a&&(a=moment(e).year(t.year()-1),i=moment(e).year(t.year())),52*(a.year()-e.year())+Math.floor(52*(t-a)/(i-a))}var birthday=moment("1982-07-25","YYYY-MM-DD"),WEEK=6048e5,todayIndex=getIndex(moment(),birthday);console.log(todayIndex);const n_weeks=52,n_years=90;for(var data=[],i=0;i<4732;i++)data.push([]);console.log(moment.duration(78.22,"years"));var events={family:[{description:"Met Abbie",date:moment("2007-03-03","YYYY-MM-DD")},{description:"Married Abbie",date:moment("2011-10-22","YYYY-MM-DD")},{description:"Ottilie born",date:moment("2013-11-17","YYYY-MM-DD")},{description:"Estelle born",date:moment("2016-06-28","YYYY-MM-DD")},{description:"Datascope started",date:moment("2009-07-01","YYYY-MM-DD")},{description:"Grad school started",date:moment("2004-09-01","YYYY-MM-DD")},{description:"College started",date:moment("2000-08-26","YYYY-MM-DD")},{description:"Datascope sold / started at IDEO",date:moment("2017-10-13","YYYY-MM-DD")},{description:"Life expectancy?",date:moment("1982-07-25","YYYY-MM-DD").add(65,"years")},{description:"Life expectancy?",date:moment("1982-07-25","YYYY-MM-DD").add(78.22,"years")},{description:"Life expectancy?",date:moment("1982-07-25","YYYY-MM-DD").add(83,"years")},{description:"Dad died",date:moment("2019-03-10","YYYY-MM-DD")}]};Object.keys(events).forEach(function(t){events[t].forEach(function(t){var e=getIndex(t.date,birthday);e>=0&&data[e].push(t.description)})}),what_i_wanted_to_do=["paleontologist","lounge pianist","architect","baseball player","mechanical engineer","electrical engineer","physicist","biologist?","artist?","writer?"];const width=400,padding={top:30,right:0,bottom:10,left:30},squish=1,plotAreaWidth=400-padding.left-padding.right,plotAreaHeight=plotAreaWidth*(90/52)*1,height=plotAreaHeight+padding.bottom+padding.top,xScale=d3.scaleLinear().domain([1,53]).range([0,plotAreaWidth]),yScale=d3.scaleLinear().domain([0,90]).range([0,plotAreaHeight]),container=d3.select("#vis-container");var pointRadius=plotAreaWidth/52/2;const svg=container.append("svg").attr("width",400).attr("height",height),g=svg.append("g").attr("transform",`translate(${padding.left} ${padding.top})`),xAxisG=g.append("g").classed("x-axis",!0).attr("transform",`translate(0 ${-2*pointRadius})`),yAxisG=g.append("g").classed("y-axis",!0).attr("transform",`translate(${-2*pointRadius} 0)`),xTicks=Math.round(plotAreaWidth/50),yTicks=Math.round(plotAreaHeight/50),xAxis=d3.axisTop(xScale).ticks(xTicks).tickSize(0),yAxis=d3.axisLeft(yScale).ticks(yTicks).tickSize(0);yAxisG.call(yAxis),xAxisG.call(xAxis);const rectPad=1,circles=g.append("g").attr("class","circles"),binding=circles.selectAll(".data-point").data(data,t=>t.id);binding.enter().append("svg:rect").classed("data-point",!0).attr("r",pointRadius).attr("x",function(t,e){return xScale(e%52+1-.5)+.5}).attr("y",function(t,e){return yScale(Math.floor(e/52)-.5)+.5}).attr("width",xScale(1)-xScale(0)-1).attr("height",function(t,e){return t.length,yScale(1)-yScale(0)-1}).attr("fill-opacity",1).attr("fill",function(t,e){if(t.length>0)return console.log(t),chroma("black");if(e>todayIndex){let t=3,a=.8*(e/52)/(90*t);return chroma.rgb(0,0,0).luminance(1-1/t+a,"lab")}return chroma("DarkSeaGreen")}).append("svg:title").text(function(t,e){return t[0]});